# Work Log - Valuation Platform Backend Development

## í”„ë¡ íŠ¸ì—”ë“œ ê°œì„  ì‘ì—… ì™„ë£Œ (2026-01-24) â­

### ì‘ì—… ìƒíƒœ: âœ… ì™„ë£Œ

### ì‘ì—… ê°œìš”
ValueLink í”„ë¡ íŠ¸ì—”ë“œ í˜ì´ì§€ ê°œì„  ë° í‘¸í„° ì»´í¬ë„ŒíŠ¸ ìƒì„±/ì ìš© ì™„ë£Œ.

---

### ì™„ë£Œëœ ì‘ì—… ëª©ë¡

#### 1. ë³¸ì§ˆê°€ì¹˜í‰ê°€ë²• ì„¤ëª… ë¬¸êµ¬ ìˆ˜ì •
- **íŒŒì¼**: `app/valuation.html` (441ë²ˆ ì¤„)
- **ë³€ê²½ ì „**: "ê¸°ì—…ì˜ ìì‚°ê°€ì¹˜ì™€ ìˆ˜ìµê°€ì¹˜ë¥¼ 40:60ì˜ ë¹„ìœ¨ë¡œ ê°€ì¤‘í‰ê· í•˜ì—¬ ì‚°ì •í•˜ëŠ” ìë³¸ì‹œì¥ë²•ì— ë”°ë¥¸ í‰ê°€ ë°©ë²•ì…ë‹ˆë‹¤. ë¹„ìƒì¥ë²•ì¸ì˜ ì£¼ì‹ ë§¤ìˆ˜ì²­êµ¬ê¶Œ í–‰ì‚¬ ì‹œ í–‰ì‚¬ê°€ê²©, M&A ì‹œ í•©ë³‘ê°€ì•¡ì„ ì‚°ì •í•˜ëŠ” ë° ì‚¬ìš©ë˜ë©°, IPO ê³µëª¨ê°€ ì‚°ì •ì—ì„œë„ ì¤‘ìš”í•œ ê¸°ì¤€ìœ¼ë¡œ í™œìš©ë©ë‹ˆë‹¤."
- **ë³€ê²½ í›„**: "ê¸°ì—…ì˜ ìì‚°ê°€ì¹˜ì™€ ìˆ˜ìµê°€ì¹˜ë¥¼ 40:60ì˜ ë¹„ìœ¨ë¡œ ê°€ì¤‘í‰ê· í•˜ì—¬ ì‚°ì •í•˜ëŠ” ìë³¸ì‹œì¥ë²•ì— ë”°ë¥¸ í‰ê°€ ë°©ë²•ì…ë‹ˆë‹¤. IPO ê³µëª¨ê°€ ì‚°ì •ì—ì„œ ì¤‘ìš”í•œ ê¸°ì¤€ìœ¼ë¡œ í™œìš©ë©ë‹ˆë‹¤."

#### 2. í‘¸í„° ì»´í¬ë„ŒíŠ¸ ìƒì„±
- **íŒŒì¼**: `components/footer.html` (ì‹ ê·œ ìƒì„±)
- **ë‚´ìš©**:
  - íšŒì‚¬ ì •ë³´ (ì£¼ì†Œ, ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸, ëŒ€í‘œì´ì‚¬)
  - ì„œë¹„ìŠ¤ ë§í¬ (Valuation, Link, Deals, My Page)
  - ì§€ì› ë§í¬ (ê³ ê°ì„¼í„°, FAQ, ì´ìš© ê°€ì´ë“œ, ë¬¸ì˜í•˜ê¸°)
  - ì—°ë½ì²˜ (ì „í™”, íŒ©ìŠ¤, ì´ë©”ì¼, ì†Œì…œ ë¯¸ë””ì–´)
  - í‘¸í„° í•˜ë‹¨ (ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨, ì´ìš©ì•½ê´€, ë©´ì±…ì¡°í•­, ì €ì‘ê¶Œ)
- **íŠ¹ì§•**:
  - ë°˜ì‘í˜• ë””ìì¸ (ë°ìŠ¤í¬íƒ‘/íƒœë¸”ë¦¿/ëª¨ë°”ì¼)
  - ê²½ë¡œ ìë™ ì¡°ì • ìŠ¤í¬ë¦½íŠ¸ (app í´ë” ë‚´ë¶€/ì™¸ë¶€)
  - ì†Œì…œ ë¯¸ë””ì–´ ë§í¬ (Facebook, Twitter, LinkedIn, Instagram)

#### 3. í‘¸í„° ì ìš© (4ê°œ í˜ì´ì§€)
- **index.html** (ì¸íŠ¸ë¡œ í˜ì´ì§€)
  - ê¸°ì¡´ ì¸ë¼ì¸ í‘¸í„° ì œê±°
  - í‘¸í„° ì»´í¬ë„ŒíŠ¸ ë¡œë“œ ì¶”ê°€
- **app/valuation.html**
  - í‘¸í„° ì»¨í…Œì´ë„ˆ ì¶”ê°€
  - í‘¸í„° ë¡œë“œ ìŠ¤í¬ë¦½íŠ¸ ì¶”ê°€
- **app/link.html**
  - í‘¸í„° ì»¨í…Œì´ë„ˆ ì¶”ê°€
  - í‘¸í„° ë¡œë“œ ìŠ¤í¬ë¦½íŠ¸ ì¶”ê°€
- **app/deal.html**
  - í‘¸í„° ì»¨í…Œì´ë„ˆ ì¶”ê°€
  - í‘¸í„° ë¡œë“œ ìŠ¤í¬ë¦½íŠ¸ ì¶”ê°€

#### 4. ë§ˆì´ í˜ì´ì§€ ì—°ê²° í™•ì¸
- **í—¤ë” ì»´í¬ë„ŒíŠ¸** (`components/header.html`)ì— ì´ë¯¸ ë§ˆì´ í˜ì´ì§€ ë§í¬ ì¡´ì¬ í™•ì¸
  - ë©”ë‰´ í•­ëª©: "My Page" (273ë²ˆ ì¤„)
  - ê²½ë¡œ: `app/core/mypage.html`
  - ë™ì  ê²½ë¡œ ì¡°ì •: ìŠ¤í¬ë¦½íŠ¸ê°€ í˜„ì¬ ìœ„ì¹˜ì— ë”°ë¼ ìƒëŒ€ ê²½ë¡œ ìë™ ì¡°ì • (311ë²ˆ ì¤„)

#### 5. Link í˜ì´ì§€ êµ¬ì¡° í™•ì¸
- **app/link.html**ì´ ì´ë¯¸ í…Œì´ë¸” í˜•ì‹ìœ¼ë¡œ ì‘ì„±ë˜ì–´ ìˆìŒ í™•ì¸
  - ì¹´ë“œ í˜•ì‹ â†’ í…Œì´ë¸” í˜•ì‹ ë³€ê²½ ì´ë¯¸ ì™„ë£Œë¨

---

### ê¸°ìˆ ì  íŠ¹ì§•

1. **ì»´í¬ë„ŒíŠ¸ ê¸°ë°˜ êµ¬ì¡°**
   - í—¤ë”ì™€ í‘¸í„°ë¥¼ ë³„ë„ ì»´í¬ë„ŒíŠ¸ë¡œ ë¶„ë¦¬
   - `fetch()` APIë¡œ ë™ì  ë¡œë“œ
   - ìŠ¤í¬ë¦½íŠ¸ íƒœê·¸ ìˆ˜ë™ ì‹¤í–‰ìœ¼ë¡œ ê¸°ëŠ¥ í™œì„±í™”

2. **ë°˜ì‘í˜• ë””ìì¸**
   - ë°ìŠ¤í¬íƒ‘: 4ì—´ ê·¸ë¦¬ë“œ
   - íƒœë¸”ë¦¿: 2ì—´ ê·¸ë¦¬ë“œ
   - ëª¨ë°”ì¼: 1ì—´ ê·¸ë¦¬ë“œ

3. **ê²½ë¡œ ìë™ ì¡°ì •**
   - í˜„ì¬ í˜ì´ì§€ ìœ„ì¹˜ ê°ì§€ (`currentPath.includes('/app/')`)
   - ìƒëŒ€ ê²½ë¡œ ìë™ ì¡°ì • (`../` ì¶”ê°€/ì œê±°)
   - app í´ë” ë‚´ë¶€/ì™¸ë¶€ ëª¨ë‘ ì§€ì›

---

### í´ë” êµ¬ì¡°

```
valuation-platform/frontend/
â”œâ”€â”€ index.html                  â† í‘¸í„° ì ìš© ì™„ë£Œ
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ header.html            â† ë§ˆì´ í˜ì´ì§€ ë§í¬ í¬í•¨
â”‚   â””â”€â”€ footer.html            â† ì‹ ê·œ ìƒì„±
â””â”€â”€ app/
    â”œâ”€â”€ valuation.html         â† ë¬¸êµ¬ ìˆ˜ì • + í‘¸í„° ì ìš©
    â”œâ”€â”€ link.html              â† í‘¸í„° ì ìš© (í…Œì´ë¸” í˜•ì‹ í™•ì¸)
    â”œâ”€â”€ deal.html              â† í‘¸í„° ì ìš©
    â””â”€â”€ core/
        â””â”€â”€ mypage.html        â† ê¸°ì¡´ íŒŒì¼ (ì—°ê²° í™•ì¸)
```

---

### í™•ì¸ ì‚¬í•­

âœ… ë³¸ì§ˆê°€ì¹˜í‰ê°€ë²• ì„¤ëª… ë¬¸êµ¬ ê°„ì†Œí™”
âœ… í‘¸í„° ì»´í¬ë„ŒíŠ¸ ìƒì„±
âœ… 4ê°œ ì£¼ìš” í˜ì´ì§€ì— í‘¸í„° ì ìš©
âœ… ë§ˆì´ í˜ì´ì§€ ë§í¬ í—¤ë”ì— ì´ë¯¸ ì¡´ì¬ í™•ì¸
âœ… Link í˜ì´ì§€ í…Œì´ë¸” í˜•ì‹ í™•ì¸

---

## Dev Package ê°œë³„ íŒŒì¼ JSON êµ¬ì¡°ë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜ (2026-01-21) â­

### ì‘ì—… ìƒíƒœ: âœ… ì™„ë£Œ

### ì‘ì—… ê°œìš”
ValueLink í”„ë¡œì íŠ¸ì˜ JSON ë°ì´í„° êµ¬ì¡°ë¥¼ Dev Package í‘œì¤€(ê°œë³„ íŒŒì¼ ë°©ì‹)ìœ¼ë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜ ì™„ë£Œ.

### ì—…ë°ì´íŠ¸ëœ íŒŒì¼ ëª©ë¡

#### 1. `.claude/methods/01_json-crud.md`
- **ë³€ê²½ ë‚´ìš©**: ë‹¨ì¼ íŒŒì¼ (`in_progress/project_sal_grid.json`) â†’ ê°œë³„ íŒŒì¼ (`index.json` + `grid_records/{TaskID}.json`)
- **í•µì‹¬ ë³€ê²½**:
  - `index.json` = í”„ë¡œì íŠ¸ ë©”íƒ€ë°ì´í„° + `task_ids` ë°°ì—´
  - `grid_records/{TaskID}.json` = ê°œë³„ Task ë°ì´í„°
  - Task ì¶”ê°€/ìˆ˜ì •/ì‚­ì œ ì‹œ ê°œë³„ íŒŒì¼ ì§ì ‘ ì¡°ì‘

#### 2. `.claude/rules/04_grid-writing-json.md`
- **ë³€ê²½ ë‚´ìš©**: Dev Package ë²„ì „ìœ¼ë¡œ ì „ì²´ êµì²´
- **í•µì‹¬ ì¶”ê°€**:
  - ì„¹ì…˜ 1.1: SAL ID ë° ì˜ì¡´ì„±(dependencies) ê·œì¹™
  - ì„¹ì…˜ 6: JSON í´ë” êµ¬ì¡° (ê°œë³„ íŒŒì¼ ë°©ì‹)
  - ì„¹ì…˜ 9.5: SSAL Works í”Œë«í¼ ì—°ë™
  - Viewer ë°ì´í„° ë¡œë”© ë°©ì‹ ìƒì„¸ ì„¤ëª…

#### 3. `.claude/rules/07_task-crud.md`
- **ë³€ê²½ ë‚´ìš©**: Dev Package ë²„ì „ìœ¼ë¡œ ì „ì²´ êµì²´
- **í•µì‹¬ ë³€ê²½**:
  - Task ì¶”ê°€ ì‹œ: `index.json` ì—…ë°ì´íŠ¸ + ê°œë³„ íŒŒì¼ ìƒì„±
  - Task ìˆ˜ì • ì‹œ: í•´ë‹¹ `grid_records/{TaskID}.json` íŒŒì¼ë§Œ ìˆ˜ì •
  - Task ì‚­ì œ ì‹œ: `index.json`ì—ì„œ ì œê±° + ê°œë³„ íŒŒì¼ ì‚­ì œ

#### 4. `README.md`
- **ë³€ê²½ ë‚´ìš©**: "ğŸ“Š Data Files (JSON Method)" ì„¹ì…˜ ì—…ë°ì´íŠ¸
- **í•µì‹¬ ë³€ê²½**:
  - í´ë” êµ¬ì¡° ì‹œê°í™” ì—…ë°ì´íŠ¸ (ê°œë³„ íŒŒì¼ ë°©ì‹)
  - í•µì‹¬ ì„¤ëª… ì¶”ê°€: Viewerì˜ ë³‘ë ¬ ë¡œë”© ë°©ì‹

### ê°œë³„ íŒŒì¼ êµ¬ì¡°ì˜ ì¥ì  (10ê°€ì§€)

| # | í•­ëª© | ê°œë³„ íŒŒì¼ | ë‹¨ì¼ íŒŒì¼ |
|---|------|----------|----------|
| 1 | Git ì¶©ëŒ í•´ê²° | 20x ë¹ ë¦„ (30ì´ˆ) | 5-10ë¶„ |
| 2 | íŒ€ í˜‘ì—… | ë¬´ì œí•œ ë™ì‹œ ì‘ì—… | 1ëª…ë§Œ ì‘ì—… |
| 3 | Viewer ë¡œë”© | 3x ë¹ ë¦„ (60ms) | 200ms |
| 4 | AI ì •í™•ë„ | 95% | 70% |
| 5 | í™•ì¥ì„± | 1000+ Task | 100 Task ì œí•œ |
| 6 | PR ë¦¬ë·° | 4x ë¹ ë¦„ (1ë¶„) | 5ë¶„ |
| 7 | ë©”ëª¨ë¦¬ íš¨ìœ¨ | 100KB | 10MB |
| 8 | ì‘ì—… ë³µêµ¬ | Task ë‹¨ìœ„ | ì „ì²´ íŒŒì¼ |
| 9 | ë³‘ë ¬ ì²˜ë¦¬ | O(1) | O(n) |
| 10 | ê²€ìƒ‰ ì†ë„ | O(1) | O(n) |

### êµ¬ì¡° ë¹„êµ

#### ê¸°ì¡´ (ë‹¨ì¼ íŒŒì¼)
```
method/json/data/
â””â”€â”€ in_progress/
    â””â”€â”€ project_sal_grid.json  â† ëª¨ë“  Task ë°ì´í„° í¬í•¨
```

#### í˜„ì¬ (ê°œë³„ íŒŒì¼ - Dev Package í‘œì¤€)
```
method/json/data/
â”œâ”€â”€ index.json             â† í”„ë¡œì íŠ¸ ì •ë³´ + task_ids ë°°ì—´
â””â”€â”€ grid_records/          â† Taskë³„ ê°œë³„ íŒŒì¼
    â”œâ”€â”€ S1BI1.json
    â”œâ”€â”€ S1BI2.json
    â”œâ”€â”€ S2F1.json
    â””â”€â”€ ...
```

### ë§ˆì´ê·¸ë ˆì´ì…˜ ì˜í–¥

#### âœ… ì—…ë°ì´íŠ¸ ì™„ë£Œ
- `.claude/methods/01_json-crud.md` - CRUD í”„ë¡œì„¸ìŠ¤ ì—…ë°ì´íŠ¸
- `.claude/rules/04_grid-writing-json.md` - JSON ê·œì¹™ ì—…ë°ì´íŠ¸
- `.claude/rules/07_task-crud.md` - Task CRUD í”„ë¡œì„¸ìŠ¤ ì—…ë°ì´íŠ¸
- `README.md` - ë°ì´í„° íŒŒì¼ êµ¬ì¡° ì„¤ëª… ì—…ë°ì´íŠ¸

#### ğŸ“ í˜„ì¬ ìƒíƒœ
- í´ë” êµ¬ì¡°: ì´ë¯¸ ì¡´ì¬ (`index.json`, `grid_records/` í´ë”)
- í…œí”Œë¦¿: ì´ë¯¸ ì¡´ì¬ (`grid_records/_TEMPLATE.json`)
- Viewer: ê°œë³„ íŒŒì¼ ë°©ì‹ ì§€ì› (`viewer_json.html`)

### ë‹¤ìŒ ë‹¨ê³„ (í•„ìš” ì‹œ)
1. ê¸°ì¡´ ë°ì´í„°ê°€ ìˆë‹¤ë©´ ë§ˆì´ê·¸ë ˆì´ì…˜ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
2. `in_progress/project_sal_grid.json` â†’ `index.json` + `grid_records/*.json` ë³€í™˜
3. Viewer ë™ì‘ í…ŒìŠ¤íŠ¸

---

## ì‘ì—… ë‚ ì§œ: 2026-01-20

---

## Pydantic ìŠ¤í‚¤ë§ˆ ì •ì˜ ì™„ë£Œ âœ…

### ì‘ì—… ìƒíƒœ: âœ… ì™„ë£Œ

### ì‘ì—… ê°œìš”
API ëª…ì„¸ì„œ (comprehensive-valuation-api-spec.md)ë¥¼ ê¸°ë°˜ìœ¼ë¡œ 15ê°œ API ì—”ë“œí¬ì¸íŠ¸ì— í•„ìš”í•œ ëª¨ë“  Pydantic Request/Response ìŠ¤í‚¤ë§ˆë¥¼ ì •ì˜í•¨.

---

### ìƒì„±ëœ íŒŒì¼ ëª©ë¡ (9ê°œ)

#### 1. backend/schemas/__init__.py
- ì „ì²´ ìŠ¤í‚¤ë§ˆ export
- ëª¨ë“  Request/Response ëª¨ë¸ ì„í¬íŠ¸

#### 2. backend/schemas/common.py
- `CompanyInfo`: íšŒì‚¬ ê¸°ë³¸ ì •ë³´
- `ContactInfo`: ë‹´ë‹¹ì ì •ë³´
- `ValuationInfo`: í‰ê°€ ì •ë³´
- `ProjectStatusCode`: í”„ë¡œì íŠ¸ ìƒíƒœ (11ê°œ)
- `ValuationMethodCode`: í‰ê°€ë²• ì½”ë“œ (5ê°œ)
- `ValuationPurposeCode`: í‰ê°€ ëª©ì  ì½”ë“œ
- `ErrorResponse`: ì—ëŸ¬ ì‘ë‹µ

#### 3. backend/schemas/project.py
- `ProjectCreateRequest/Response`: í”„ë¡œì íŠ¸ ìƒì„±
- `QuoteRequest/Response`: ê²¬ì ì„œ ë°œì†¡
- `NegotiationRequest/Response`: ì¡°ê±´ í˜‘ì˜
- `ApprovalRequest/Response`: ê³„ì•½ í™•ì • ë° íšŒê³„ì‚¬ ë°°ì •
- `AccountantInfo`: íšŒê³„ì‚¬ ì •ë³´

#### 4. backend/schemas/document.py
- `DocumentCategory`: 6ê°œ ë¬¸ì„œ ì¹´í…Œê³ ë¦¬
- `UploadedFileInfo`: ì—…ë¡œë“œëœ íŒŒì¼ ì •ë³´
- `UploadProgress`: ì—…ë¡œë“œ ì§„í–‰ ìƒí™©
- `DocumentUploadResponse`: ë¬¸ì„œ ì—…ë¡œë“œ ì‘ë‹µ

#### 5. backend/schemas/extraction.py
- `ExtractionRequest/Response`: AI ë°ì´í„° ì¶”ì¶œ
- `ExtractedCompanyData`: ì¶”ì¶œëœ íšŒì‚¬ ë°ì´í„°
- `ExtractedFinancials`: ì¶”ì¶œëœ ì¬ë¬´ ë°ì´í„°
- `ExtractedBalanceSheet`: ì¶”ì¶œëœ ì¬ë¬´ìƒíƒœí‘œ
- `ExtractedCapitalStructure`: ì¶”ì¶œëœ ìë³¸ êµ¬ì¡°
- `AutoCollectResponse`: AI ìë™ ìˆ˜ì§‘
- `MarketData`: ì‹œì¥ ë°ì´í„°
- `IndustryData`: ì—…ì¢… ë°ì´í„°
- `ComparableCompany`: ë¹„êµ ê¸°ì—…

#### 6. backend/schemas/valuation.py
- `CalculationRequest/Response`: í‰ê°€ ì‹¤í–‰
- `DCFResult`: DCFí‰ê°€ë²• ê²°ê³¼
- `RelativeResult`: ìƒëŒ€ê°€ì¹˜í‰ê°€ë²• ê²°ê³¼
- `AssetResult`: ìì‚°ê°€ì¹˜í‰ê°€ë²• ê²°ê³¼
- `CapitalMarketLawResult`: ë³¸ì§ˆê°€ì¹˜í‰ê°€ë²• ê²°ê³¼
- `InheritanceTaxLawResult`: ìƒì¦ì„¸ë²•í‰ê°€ë²• ê²°ê³¼
- `IntegratedResult`: í†µí•© í‰ê°€ ê²°ê³¼
- `PreviewResponse`: ê²°ê³¼ ë¯¸ë¦¬ë³´ê¸°
- `SimulationRequest/Response`: ì‹œë®¬ë ˆì´ì…˜
- `SensitivityMatrix`: ë¯¼ê°ë„ ë¶„ì„

#### 7. backend/schemas/approval.py
- `ApprovalPoint`: íšŒê³„ì‚¬ íŒë‹¨ í¬ì¸íŠ¸
- `ApprovalPointsResponse`: íŒë‹¨ í¬ì¸íŠ¸ ëª©ë¡
- `ApprovalDecisionRequest/Response`: íŒë‹¨ í¬ì¸íŠ¸ ìŠ¹ì¸
- `ImpactAnalysis`: ì˜í–¥ ë¶„ì„
- `APPROVAL_POINTS_SPEC`: 22ê°œ íŒë‹¨ í¬ì¸íŠ¸ ì „ì²´ ëª©ë¡
  - JP001-JP008: DCFí‰ê°€ë²• (8ê°œ)
  - JP009-JP012: ìƒëŒ€ê°€ì¹˜í‰ê°€ë²• (4ê°œ)
  - JP013-JP018: ìì‚°ê°€ì¹˜í‰ê°€ë²• (6ê°œ)
  - JP019-JP020: ë³¸ì§ˆê°€ì¹˜í‰ê°€ë²• (2ê°œ)
  - JP021-JP022: ìƒì¦ì„¸ë²•í‰ê°€ë²• (2ê°œ)

#### 8. backend/schemas/draft.py
- `DraftRequest/Response`: ì´ˆì•ˆ ìƒì„±
- `RevisionRequest/Response`: ìˆ˜ì • ìš”ì²­

#### 9. backend/schemas/report.py
- `FinalizeRequest/Response`: ìµœì¢… í™•ì •
- `FinalValuation`: ìµœì¢… í‰ê°€ ê²°ê³¼
- `ReportRequest/Response`: ë³´ê³ ì„œ ë°œí–‰

---

### ì»¤ë²„ëœ API ì—”ë“œí¬ì¸íŠ¸ (16ê°œ)

1. **POST /projects** - í”„ë¡œì íŠ¸ ìƒì„±
2. **POST /projects/{id}/quote** - ê²¬ì ì„œ ë°œì†¡
3. **POST /projects/{id}/negotiate** - ì¡°ê±´ í˜‘ì˜
4. **POST /projects/{id}/approve** - ê³„ì•½ í™•ì • ë° íšŒê³„ì‚¬ ë°°ì •
5. **POST /projects/{id}/documents** - ë¬¸ì„œ ì—…ë¡œë“œ
6. **POST /projects/{id}/extract** - AI ë°ì´í„° ì¶”ì¶œ
7. **POST /projects/{id}/auto-collect** - AI ìë™ ìˆ˜ì§‘
8. **POST /projects/{id}/calculate** - í‰ê°€ ì‹¤í–‰
9. **GET /projects/{id}/approval-points** - íŒë‹¨ í¬ì¸íŠ¸ ì¡°íšŒ
10. **POST /projects/{id}/approval-points/{point_id}** - íŒë‹¨ í¬ì¸íŠ¸ ìŠ¹ì¸
11. **POST /projects/{id}/draft** - ì´ˆì•ˆ ìƒì„±
12. **POST /projects/{id}/revisions** - ìˆ˜ì • ìš”ì²­
13. **GET /projects/{id}/preview** - ê²°ê³¼ ë¯¸ë¦¬ë³´ê¸°
14. **POST /projects/{id}/simulate** - ì‹œë®¬ë ˆì´ì…˜
15. **POST /projects/{id}/finalize** - ìµœì¢… í™•ì •
16. **POST /projects/{id}/report** - ë³´ê³ ì„œ ë°œí–‰

---

### íŠ¹ì§•

1. **íƒ€ì… ì•ˆì „ì„±**: Pydantic ëª¨ë¸ë¡œ Request/Response íƒ€ì… ê²€ì¦
2. **ìë™ ë¬¸ì„œí™”**: FastAPI Swaggerì—ì„œ ìë™ìœ¼ë¡œ API ë¬¸ì„œ ìƒì„±
3. **ì˜ˆì œ í¬í•¨**: ëª¨ë“  ìŠ¤í‚¤ë§ˆì— `json_schema_extra` ì˜ˆì œ í¬í•¨
4. **ê²€ì¦ ê·œì¹™**: Field validators (pattern, gt, ge, le ë“±)
5. **Literal íƒ€ì…**: ìƒíƒœ ì½”ë“œ, ì¹´í…Œê³ ë¦¬ ë“±ì— Literal ì‚¬ìš©
6. **Union íƒ€ì…**: ë‹¤ì–‘í•œ íƒ€ì…ì„ ë°›ëŠ” í•„ë“œ (approval point values)

---

---

## Database ëª¨ë¸ ì •ì˜ ì™„ë£Œ âœ…

### ì‘ì—… ìƒíƒœ: âœ… ì™„ë£Œ

### ì‘ì—… ê°œìš”
SQLAlchemyë¥¼ ì‚¬ìš©í•˜ì—¬ 9ê°œ ì£¼ìš” í…Œì´ë¸” ëª¨ë¸ ì •ì˜ ì™„ë£Œ. PostgreSQL ë°ì´í„°ë² ì´ìŠ¤ ê¸°ì¤€ìœ¼ë¡œ ì‘ì„±.

---

### ìƒì„±ëœ íŒŒì¼ ëª©ë¡ (13ê°œ)

#### 1. backend/models/__init__.py
- ì „ì²´ ëª¨ë¸ export
- 9ê°œ í…Œì´ë¸” ëª¨ë¸ ì„í¬íŠ¸

#### 2. backend/models/base.py
- `Base`: SQLAlchemy declarative base
- `TimestampMixin`: created_at, updated_at ìë™ ê´€ë¦¬

#### 3. backend/models/project.py
- `Project` í…Œì´ë¸” (í”„ë¡œì íŠ¸ ê¸°ë³¸ ì •ë³´)
- `ProjectStatus` Enum (11ê°œ ìƒíƒœ)
- `ValuationPurpose` Enum (7ê°œ ëª©ì )
- í•„ë“œ: íšŒì‚¬ ì •ë³´, ë‹´ë‹¹ì ì •ë³´, í‰ê°€ ì •ë³´, ë°°ì • ì •ë³´, ê³„ì•½ ì •ë³´
- Relationships: quotes, negotiations, documents, approval_points, valuation_results, drafts, reports

#### 4. backend/models/quote.py
- `Quote` í…Œì´ë¸” (ê²¬ì ì„œ ì •ë³´)
- í•„ë“œ: ê²¬ì  ê¸ˆì•¡, ê²°ì œ ì¡°ê±´, í¬í•¨ ì„œë¹„ìŠ¤, ìœ íš¨ ê¸°ê°„

#### 5. backend/models/negotiation.py
- `Negotiation` í…Œì´ë¸” (í˜‘ì˜ ë‚´ì—­)
- `NegotiationType` Enum (3ê°œ ìœ í˜•)
- `RequesterType` Enum (customer, admin)

#### 6. backend/models/document.py
- `Document` í…Œì´ë¸” (ì—…ë¡œë“œëœ ë¬¸ì„œ)
- `DocumentCategory` Enum (6ê°œ ì¹´í…Œê³ ë¦¬)
- í•„ë“œ: íŒŒì¼ëª…, íŒŒì¼ í¬ê¸°, ì €ì¥ ê²½ë¡œ, ë‹¤ìš´ë¡œë“œ URL

#### 7. backend/models/approval_point.py
- `ApprovalPoint` í…Œì´ë¸” (22ê°œ íŒë‹¨ í¬ì¸íŠ¸)
- `ApprovalCategory` Enum (ì¬ë¬´, ì‹œì¥, ìì‚°, ë²•ë¥ )
- `ImportanceLevel` Enum (high, medium, low)
- `ApprovalStatus` Enum (pending, approved, rejected, custom)
- í•„ë“œ: AI ì œì•ˆ, íšŒê³„ì‚¬ ìŠ¹ì¸, ê·¼ê±° ë¬¸ì„œ, ì˜í–¥ ë¶„ì„
- **ë³µí•© Primary Key**: (project_id, point_id)

#### 8. backend/models/valuation_result.py
- `ValuationResult` í…Œì´ë¸” (í‰ê°€ ê²°ê³¼)
- `ValuationMethod` Enum (5ê°œ í‰ê°€ë²•)
- `CalculationStatus` Enum (pending, running, completed, failed, partial)
- í•„ë“œ: í‰ê°€ ê²°ê³¼ (JSONB), ë¯¼ê°ë„ ë¶„ì„, ì£¼ìš” ê°€ì •
- **ë³µí•© Primary Key**: (project_id, method)

#### 9. backend/models/draft.py
- `Draft` í…Œì´ë¸” (í‰ê°€ì„œ ì´ˆì•ˆ)
- í•„ë“œ: ë³´ê³ ì„œ ìœ í˜•, ë¶€ë¡ í¬í•¨ ì—¬ë¶€, í˜ì´ì§€ ìˆ˜, ë‹¤ìš´ë¡œë“œ URL

#### 10. backend/models/revision.py
- `Revision` í…Œì´ë¸” (ìˆ˜ì • ìš”ì²­)
- `RevisionType` Enum (3ê°œ ìœ í˜•)
- í•„ë“œ: ìš”ì²­ëœ ë³€ê²½ ì‚¬í•­ (JSONB), ì‚¬ìœ , ê·¼ê±° ë¬¸ì„œ

#### 11. backend/models/report.py
- `Report` í…Œì´ë¸” (ë°œí–‰ëœ ë³´ê³ ì„œ)
- í•„ë“œ: ë³´ê³ ì„œ ìœ í˜•, íŒŒì¼ í˜•ì‹, ì „ë‹¬ ë°©ë²•, ë°œí–‰ ì •ë³´, ë‹¤ìš´ë¡œë“œ íšŸìˆ˜

#### 12. backend/database.py
- ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì„¤ì •
- `get_db()`: FastAPI ì˜ì¡´ì„± í•¨ìˆ˜
- `create_tables()`: í…Œì´ë¸” ìƒì„± í•¨ìˆ˜
- `drop_tables()`: í…Œì´ë¸” ì‚­ì œ í•¨ìˆ˜ (ê°œë°œìš©)

#### 13. backend/.env.example + requirements.txt
- í™˜ê²½ ë³€ìˆ˜ ì˜ˆì œ
- Python íŒ¨í‚¤ì§€ ì˜ì¡´ì„± ëª©ë¡

---

### í…Œì´ë¸” êµ¬ì¡° ìš”ì•½

| í…Œì´ë¸” | Primary Key | Foreign Key | ì£¼ìš” í•„ë“œ | ë¹„ê³  |
|--------|------------|-------------|----------|------|
| **projects** | project_id | - | íšŒì‚¬ ì •ë³´, í‰ê°€ ì •ë³´, ë°°ì • ì •ë³´ | ì¤‘ì‹¬ í…Œì´ë¸” |
| **quotes** | quote_id | project_id | ê²¬ì  ê¸ˆì•¡, ê²°ì œ ì¡°ê±´ | 1:N |
| **negotiations** | negotiation_id | project_id | í˜‘ì˜ ìœ í˜•, ì œì•ˆ ë‚´ìš© | 1:N |
| **documents** | file_id | project_id | íŒŒì¼ëª…, ì¹´í…Œê³ ë¦¬, ì €ì¥ ê²½ë¡œ | 1:N |
| **approval_points** | (project_id, point_id) | project_id | AI ì œì•ˆ, íšŒê³„ì‚¬ ìŠ¹ì¸ | 22ê°œ/í”„ë¡œì íŠ¸ |
| **valuation_results** | (project_id, method) | project_id | í‰ê°€ ê²°ê³¼ (JSONB) | 5ê°œ/í”„ë¡œì íŠ¸ |
| **drafts** | draft_id | project_id | ì´ˆì•ˆ URL, í˜ì´ì§€ ìˆ˜ | 1:N |
| **revisions** | revision_id | project_id | ë³€ê²½ ìš”ì²­ ë‚´ìš© (JSONB) | 1:N |
| **reports** | report_id | project_id | ë³´ê³ ì„œ URL, ë°œí–‰ ì •ë³´ | 1:N |

---

### ì£¼ìš” íŠ¹ì§•

1. **Enum íƒ€ì… ì‚¬ìš©**: ìƒíƒœ, ì¹´í…Œê³ ë¦¬ ë“±ì— Enum í™œìš©
2. **JSONB í•„ë“œ**: ìœ ì—°í•œ ë°ì´í„° êµ¬ì¡° (approval_points, valuation_results, revisions)
3. **ARRAY í•„ë“œ**: ë°°ì—´ ë°ì´í„° ì €ì¥ (valuation_methods, included_services)
4. **ë³µí•© Primary Key**: approval_points, valuation_results
5. **Cascade Delete**: í”„ë¡œì íŠ¸ ì‚­ì œ ì‹œ ê´€ë ¨ ë°ì´í„° ìë™ ì‚­ì œ
6. **TimestampMixin**: ëª¨ë“  í…Œì´ë¸”ì— created_at, updated_at ìë™ ì¶”ê°€
7. **Relationships**: SQLAlchemy ORM ê´€ê³„ ì •ì˜

---

### ë‹¤ìŒ ë‹¨ê³„

1. **FastAPI ë¼ìš°í„° êµ¬í˜„**
   - í”„ë¡œì íŠ¸ ê´€ë¦¬ ë¼ìš°í„° (ìƒì„±, ê²¬ì , í˜‘ì˜, ìŠ¹ì¸)
   - ìë£Œ ìˆ˜ì§‘ ë¼ìš°í„° (ë¬¸ì„œ ì—…ë¡œë“œ, AI ì¶”ì¶œ, ìë™ ìˆ˜ì§‘)
   - í‰ê°€ ë¼ìš°í„° (ê³„ì‚°, ë¯¸ë¦¬ë³´ê¸°, ì‹œë®¬ë ˆì´ì…˜)
   - ìŠ¹ì¸ í¬ì¸íŠ¸ ë¼ìš°í„° (ì¡°íšŒ, ìŠ¹ì¸)
   - ì´ˆì•ˆ/ìˆ˜ì • ë¼ìš°í„°
   - ë³´ê³ ì„œ ë¼ìš°í„°

2. **CRUD ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ êµ¬í˜„**
   - í”„ë¡œì íŠ¸ CRUD
   - íŒë‹¨ í¬ì¸íŠ¸ CRUD
   - í‰ê°€ ê²°ê³¼ CRUD

3. **5ê°€ì§€ í‰ê°€ ì—”ì§„ í†µí•©**
   - dcf_engine.py (ì´ë¯¸ ì¡´ì¬)
   - relative_engine.py, asset_engine.py
   - capital_market_law_engine.py, inheritance_tax_law_engine.py

---

## ì´ì „ ì‘ì—…: CSV to JSON Migration (2025-01-02)

### ì‘ì—… ìƒíƒœ: âœ… ì™„ë£Œ

## CSV to JSON Migration ì‘ì—… ì™„ë£Œ

### ì‘ì—… ìƒíƒœ: âœ… ì™„ë£Œ

### ì‘ì—… ê°œìš”
Dev Packageì˜ ëª¨ë“  CSV ê´€ë ¨ íŒŒì¼ì„ JSON ë°©ì‹ìœ¼ë¡œ ë³€ê²½í•˜ì—¬ ì¼ë°˜ ì‚¬ìš©ìê°€ JSON ê¸°ë°˜ìœ¼ë¡œ í”„ë¡œì íŠ¸ë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆë„ë¡ í•¨.

---

### ë³€ê²½ëœ í´ë” êµ¬ì¡°

| Before | After |
|--------|-------|
| `method/csv/` | `method/json/` |
| `method/csv/data/in_progress/sal_grid.csv` | `method/json/data/in_progress/project_sal_grid.json` |
| `method/csv/data/completed/` | `method/json/data/completed/` |

---

### ìˆ˜ì •ëœ íŒŒì¼ ëª©ë¡

#### 1. .claude/CLAUDE.md
- CSV ì°¸ì¡°ë¥¼ JSONìœ¼ë¡œ ë³€ê²½
- DB vs JSON ë°ì´í„° êµ¬ë¶„ ì„¤ëª… ì¶”ê°€
- JSON í´ë” êµ¬ì¡° ì„¤ëª… ì¶”ê°€

#### 2. .claude/methods/01_json-crud.md
- CSV CRUD â†’ JSON CRUDë¡œ ë³€ê²½
- JSON íŒŒì¼ ê²½ë¡œ ë° êµ¬ì¡° ì„¤ëª…

#### 3. .claude/rules/04_grid-writing-json.md
- CSV ì‘ì—… ê·œì¹™ì„ JSON ì‘ì—… ê·œì¹™ìœ¼ë¡œ ì „ë©´ ë³€ê²½
- JSON íŒŒì¼ ìœ„ì¹˜ ë° CRUD ë°©ë²• ì„¤ëª…
- Viewer í™•ì¸ ë°©ë²• ì„¹ì…˜ ì¶”ê°€ (ë¡œì»¬ + GitHub Pages)

#### 4. .claude/rules/05_execution-process.md
- CSV ì°¸ì¡°ë¥¼ JSONìœ¼ë¡œ ë³€ê²½

#### 5. .claude/rules/07_task-crud.md
- Task CRUD í”„ë¡œì„¸ìŠ¤ì˜ CSV ì°¸ì¡°ë¥¼ JSONìœ¼ë¡œ ë³€ê²½
- JSON í´ë” êµ¬ì¡° ì„¤ëª… ì¶”ê°€

#### 6. viewer/viewer_json.html (ì´ì „: viewer_csv.html)
- íƒ€ì´í‹€: `Project SAL Grid Viewer (CSV)` â†’ `Project SAL Grid Viewer (JSON)`
- í—¤ë” í…ìŠ¤íŠ¸: ë¡œì»¬ CSV íŒŒì¼ ê¸°ë°˜ â†’ ë¡œì»¬ JSON íŒŒì¼ ê¸°ë°˜
- fetch ê²½ë¡œ ë³€ê²½:
  - Before: `../method/csv/data/in_progress/sal_grid.csv`
  - After: `../method/json/data/in_progress/project_sal_grid.json`
- CSV íŒŒì‹± í•¨ìˆ˜(`parseCSV`, `parseCSVLine`) ì œê±°
- `response.json()` ë°©ì‹ìœ¼ë¡œ ë°ì´í„° ë¡œë“œ
- Stage Gate ê´€ë ¨ ë©”ì‹œì§€ CSV â†’ JSON

#### 7. viewer/viewer_mobile_json.html (ì´ì „: viewer_mobile_csv.html)
- íƒ€ì´í‹€: `Project SAL Grid Viewer - Mobile (CSV)` â†’ `Project SAL Grid Viewer - Mobile (JSON)`
- í—¤ë” í…ìŠ¤íŠ¸: `SAL Grid Viewer (CSV)` â†’ `SAL Grid Viewer (JSON)`
- fetch ê²½ë¡œ ë³€ê²½:
  - Before: `../method/csv/data/sal_grid.csv`
  - After: `../method/json/data/in_progress/project_sal_grid.json`
- CSV íŒŒì‹± í•¨ìˆ˜ ì œê±°
- `response.json()` ë°©ì‹ìœ¼ë¡œ ë°ì´í„° ë¡œë“œ

---

### JSON íŒŒì¼ êµ¬ì¡°

```json
{
  "project_id": "í”„ë¡œì íŠ¸ID",
  "project_name": "í”„ë¡œì íŠ¸ëª…",
  "created_at": "2025-01-01T00:00:00Z",
  "updated_at": "2025-01-01T00:00:00Z",
  "tasks": [
    {
      "task_id": "S1F1",
      "task_name": "Task ì´ë¦„",
      "stage": 1,
      "area": "F",
      "task_status": "Pending",
      "task_progress": 0,
      "verification_status": "Not Verified",
      ...22ê°œ ì†ì„±
    }
  ]
}
```

---

### í•µì‹¬ ë³€ê²½ ì‚¬í•­

1. **ë°ì´í„° í˜•ì‹**: CSV â†’ JSON
2. **íŒŒì‹± ë°©ì‹**: `parseCSV()` í•¨ìˆ˜ â†’ `response.json()`
3. **íŒŒì¼ ê²½ë¡œ**: `method/csv/` â†’ `method/json/`
4. **íŒŒì¼ëª…**: `sal_grid.csv` â†’ `project_sal_grid.json`

---

### ë¹„ê³ 

- DB MethodëŠ” SSAL Works ì˜ˆì‹œìš©ìœ¼ë¡œ ìœ ì§€ (viewer_database.html)
- ì¼ë°˜ ì‚¬ìš©ìëŠ” JSON Method ì‚¬ìš© (viewer_json.html)
- ViewerëŠ” `method/json/data/in_progress/` í´ë”ì˜ JSON íŒŒì¼ì„ ë¡œë“œ

---

### ê´€ë ¨ ë¦¬í¬íŠ¸
`Human_ClaudeCode_Bridge/Reports/csv_to_json_migration_report.json`
