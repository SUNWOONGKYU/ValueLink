<!-- ValueLink 공통 헤더 -->
<style>
    /* Header Styles */
    header {
        background: var(--white, #FFFFFF);
        border-bottom: 1px solid #E5E7EB;
        padding: 0 40px;
        height: 72px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        position: sticky;
        top: 0;
        z-index: 100;
    }
    .header-left { display: flex; align-items: center; gap: 48px; }
    .logo { display: flex; align-items: center; gap: 12px; text-decoration: none; }
    .logo-symbol { width: 44px; height: 44px; }
    .logo-text { font-size: 24px; font-weight: 700; color: #1E3A5F; }
    .portal-badge {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 8px 16px;
        background: var(--deep-blue-pale, #DBEAFE);
        color: var(--deep-blue, #1D4ED8);
        border-radius: 8px;
        font-size: 14px;
        font-weight: 600;
    }
    .header-right { display: flex; align-items: center; gap: 16px; }
    .user-info { display: flex; align-items: center; gap: 12px; }
    .user-avatar {
        width: 40px;
        height: 40px;
        background: var(--deep-blue-pale, #DBEAFE);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 600;
        color: var(--deep-blue, #1D4ED8);
    }
    .user-name { font-size: 14px; font-weight: 600; color: var(--text-primary, #111827); }
    .user-company { font-size: 12px; color: var(--text-muted, #6B7280); }
    .btn-logout {
        padding: 8px 16px;
        font-size: 14px;
        color: var(--text-muted, #6B7280);
        background: transparent;
        border: 1px solid #E5E7EB;
        border-radius: 8px;
        cursor: pointer;
    }
    .btn-logout:hover {
        background: #F3F4F6;
    }
    .main-nav { display: flex; gap: 8px; }
    .nav-item {
        padding: 10px 20px;
        font-size: 15px;
        font-weight: 600;
        text-decoration: none;
        color: var(--text-secondary, #374151);
        border-radius: 8px;
        transition: all 0.2s ease;
    }
    .nav-item:hover { background: var(--bg-light, #F3F4F6); }
    .nav-item.active {
        background: var(--deep-blue-pale, #DBEAFE);
        color: var(--deep-blue, #1D4ED8);
    }

    /* 햄버거 메뉴 버튼 (모바일 전용) */
    .mobile-menu-btn {
        display: none;
        background: none;
        border: none;
        cursor: pointer;
        padding: 8px;
        z-index: 110;
    }

    .mobile-menu-btn span {
        display: block;
        width: 24px;
        height: 2px;
        background: #1E3A5F;
        margin: 5px 0;
        border-radius: 2px;
        transition: all 0.3s ease;
    }

    .mobile-menu-btn.active span:nth-child(1) {
        transform: rotate(45deg) translate(5px, 5px);
    }

    .mobile-menu-btn.active span:nth-child(2) {
        opacity: 0;
    }

    .mobile-menu-btn.active span:nth-child(3) {
        transform: rotate(-45deg) translate(5px, -5px);
    }

    /* 모바일 반응형 */
    @media (max-width: 768px) {
        header {
            padding: 0 16px;
            height: 60px;
        }

        .logo-symbol {
            width: 36px;
            height: 36px;
        }

        .logo-text {
            font-size: 20px;
        }

        .header-left {
            gap: 12px;
        }

        .mobile-menu-btn {
            display: block;
        }

        /* 네비게이션 모바일 슬라이드 메뉴 */
        .main-nav {
            position: fixed;
            top: 60px;
            left: 0;
            right: 0;
            background: white;
            flex-direction: column;
            padding: 16px;
            gap: 4px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            border-bottom: 1px solid #E5E7EB;
            display: none;
            z-index: 100;
        }

        .main-nav.show {
            display: flex;
        }

        .nav-item {
            padding: 14px 16px;
            font-size: 16px;
            border-radius: 8px;
        }

        .nav-item:hover {
            background: #F3F4F6;
        }

        .portal-badge {
            display: none;
        }

        /* 헤더 우측 영역 */
        .header-right {
            gap: 8px;
        }

        .user-info {
            display: none;
        }

        .btn-logout {
            padding: 6px 12px;
            font-size: 12px;
        }
    }

    /* 태블릿 */
    @media (min-width: 769px) and (max-width: 1024px) {
        header {
            padding: 0 24px;
        }

        .header-left {
            gap: 24px;
        }

        .nav-item {
            padding: 8px 14px;
            font-size: 14px;
        }
    }
</style>

<header>
    <div class="header-left">
        <a href="/" class="logo">
            <svg class="logo-symbol" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect width="100" height="100" rx="20" fill="#1E3A5F"/>
                <path d="M25 35L50 65L75 35" stroke="white" stroke-width="8" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <span class="logo-text">ValueLink</span>
        </a>
        <!-- 햄버거 메뉴 (모바일) -->
        <button class="mobile-menu-btn" id="mobileMenuBtn" onclick="toggleMobileMenu()">
            <span></span><span></span><span></span>
        </button>
        <nav class="main-nav" id="mainNav">
            <a href="/app/index.html" class="nav-item" id="menu-valuation">평가</a>
            <a href="/app/core/deal.html" class="nav-item" id="menu-deal">Deal</a>
        </nav>
    </div>
    <div class="header-right">
        <div class="user-info">
            <div class="user-avatar" id="userAvatar">U</div>
            <div>
                <div class="user-name" id="userName">사용자</div>
                <div class="user-company" id="userCompany">회사명</div>
            </div>
        </div>
        <button class="btn-logout" onclick="handleLogout()">로그아웃</button>
    </div>
</header>

<script>
// 로그아웃 처리
async function handleLogout() {
    if (confirm('로그아웃 하시겠습니까?')) {
        // Supabase 로그아웃 (페이지에 이미 supabase 인스턴스가 있다고 가정)
        if (typeof supabase !== 'undefined') {
            await supabase.auth.signOut();
        }
        window.location.href = '/app/login.html';
    }
}

// 사용자 정보 로드 (옵션)
async function loadUserInfo() {
    if (typeof supabase !== 'undefined') {
        const { data: { user } } = await supabase.auth.getUser();
        if (user) {
            const { data: userData } = await supabase
                .from('users')
                .select('name')
                .eq('user_id', user.id)
                .single();

            if (userData) {
                document.getElementById('userName').textContent = userData.name || '사용자';
                document.getElementById('userAvatar').textContent = userData.name?.charAt(0) || 'U';
            }
        }
    }
}

// 페이지 로드 시 사용자 정보 로드
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', loadUserInfo);
} else {
    loadUserInfo();
}

// 모바일 메뉴 토글
function toggleMobileMenu() {
    const nav = document.getElementById('mainNav');
    const btn = document.getElementById('mobileMenuBtn');
    nav.classList.toggle('show');
    btn.classList.toggle('active');
}

// 모바일 메뉴 외부 클릭 시 닫기
document.addEventListener('click', function(e) {
    const nav = document.getElementById('mainNav');
    const btn = document.getElementById('mobileMenuBtn');
    if (nav && btn && !nav.contains(e.target) && !btn.contains(e.target)) {
        nav.classList.remove('show');
        btn.classList.remove('active');
    }
});
</script>
